{"version":3,"sources":["webpack:///./src/win-form/commonChildTable.vue","webpack:///./src/win-form/commonChildTable.vue?34c5","webpack:///./src/win-form/commonChildTable.vue?06cf"],"names":["commonChildTable","mixins","commonComponentMixin","props","KeyValue","type","String","default","comboboxdata","Object","formAllConfig","chileTableItem","tableData","mainformData","computed","isEdit","formstate","this","routerParams","formStatusValue","mapGetters","data","KeyWord","formState","showCheckBox","tagShow","offset","tableLists","defaultData","selectItems","currentItem","tableShowField","option","title","text","show","left","center","right","subTableData","subTableTextNameOption","subTableShowField","tableType","selectId","submit","mx_isLoading","mx_message","mx_alertShow","mx_alertTitle","mx_toastShow","mx_toastText","mx_deleyTime","mounted","tableInit","methods","verifyRequireError","controls","requiredFields","arr","filter","item","required","length","i","field","textNameOption","tableListType","subTable","assign_default","getTableType","formRowChange","value","_add","addType","MixinAlertShowEvent","addFormLoad","saveFromData","_this","formDate","foreignfield","KeyWordType","checkChildTableIsAdded","setChildTableData","obj","FormId","FromId","forEach","AlertShowEvent","params","organizeParams","MinXinHttpFetch","FormSave","response","success","$emit","closeEditBlock","deleteSelectedItems","_this2","_backPre","_this3","swhere","select","FormLoad","JSON","parse","selectItemView","formatFromDataToView","$refs","subFileAttach","GetDocFilesLoad","Id","Code","formListUnits","formListUnit","backDefault","_delete","_preDelete","_selectItem","push","_unSelectItem","removeList","mapActions","watch","handler","newData","oldData","values","concat","immediate","components","SearchBox","FormList","FooterBar","FormRow","SubCommonTable","win_form_commonChildTable","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_e","_l","key","on","click","$event","ref","refInFor","attrs","selectItem","unSelectItem","Add","preDelete","Delete","backPre","style","transform","fieldItem","fieldIndex","label","format","readonly","disabled","placeholder","enterChange","tableTextNameOption","model","callback","$$v","expression","time","content","on-hide","MixinAlertHideEvent","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"weixin3.0/static/js/18.2a22a6e3a53e33791fe2.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapActions } from 'vuex'\nimport {\n  SearchBox,\n  FormList,\n  FooterBar,\n  subFileAttach,\n  FormRow,\n  SubCommonTable\n} from 'components/index.js'\n\nimport {\n  removeList,\n  organizeParams,\n  getTableType,\n  checkChildTableIsAdded,\n  setChildTableData,\n  formatFromDataToView\n} from 'common/js/Util.js'\nimport { commonComponentMixin } from 'common/js/mixin.js'\nimport {\n  FormLoad,\n  FormSave\n} from 'api/index.js'\n\nexport default {\n  mixins: [commonComponentMixin],\n  props: {\n    KeyValue: {\n      type: String,\n      default: ''\n    },\n    comboboxdata: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    formAllConfig: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    chileTableItem: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    tableData: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    mainformData: {\n      type: Object,\n      default () {\n        return {}\n      }\n    }\n  },\n  computed: {\n    isEdit () {\n      let formstate = this.routerParams.formstate\n\n      switch (this.formStatusValue) {\n        case '40':\n          return false\n        case '50':\n          return false\n        default:\n          if (formstate !== 'view') {\n            return true\n          } else {\n            return false\n          }\n      }\n    },\n    ...mapGetters([\n      'routerParams',\n      'formStatusValue'\n    ])\n  },\n  data () {\n    return {\n      KeyWord: '',\n      formState: '',\n      showCheckBox: false,\n      tagShow: false,\n      offset: 100,\n      tableLists: [],\n      defaultData: [],\n      selectItems: [],\n      currentItem: {},\n      tableShowField: [],\n      option: {\n        title: {\n          text: '',\n          show: true\n        },\n        left: {\n          text: '',\n          show: true\n        },\n        center: {\n          text: '',\n          show: true\n        },\n        right: {\n          text: '',\n          show: true\n        }\n      },\n      subTableData: [],\n      subTableTextNameOption: {},\n      subTableShowField: [],\n      tableType: '',\n      selectId: '',\n      submit: false,\n      mx_isLoading: false,\n      mx_message: '',\n      mx_alertShow: false,\n      mx_alertTitle: '提示',\n      mx_toastShow: false,\n      mx_toastText: '',\n      mx_deleyTime: 1000\n    }\n  },\n  mounted () {\n    this.formState = this.routerParams.formstate\n    this.tableInit()\n  },\n  methods: {\n    verifyRequireError: function (currentItem, controls) {\n      this.submit = true\n      let arr = [...controls]\n      let requiredFields = arr.filter((item) => {\n        if (item.required) {\n          return item\n        }\n      })\n\n      if (requiredFields.length === 0) {\n        return false\n      }\n\n      for (let i = 0; i < requiredFields.length; i++) {\n        let item = requiredFields[i]\n\n        if (!currentItem[item.field]) {\n          return true\n        }\n      }\n\n      return false\n    },\n    // 初始化\n    tableInit () {\n      let textNameOption = this.chileTableItem.textNameOption\n      let tableType = this.chileTableItem.tableListType\n      let subTable = this.chileTableItem.subTable\n\n      this.tableShowField = this.chileTableItem.tableShowField\n      this.option = Object.assign(this.option, textNameOption)\n      this.KeyWord = this.chileTableItem.KeyWord\n      this.tableType = getTableType(tableType)\n\n      if (subTable && subTable === 'withCommonTable') {\n        this.subTableTextNameOption = this.chileTableItem.subTableTextNameOption\n        this.subTableShowField = this.chileTableItem.subTableShowField\n      }\n    },\n    formRowChange (item) {\n      this.currentItem[item.field] = item.value\n    },\n    // 新增\n    _add () {\n      let { addType } = this.chileTableItem\n      let { formstate } = this.routerParams\n\n      if (addType === 'fromWizard') {\n        this.MixinAlertShowEvent('仅限查看,不能新增')\n      } else if (formstate === 'view') {\n        this.MixinAlertShowEvent('仅限查看,不能新增')\n      } else if (formstate === 'add') {\n        this.MixinAlertShowEvent('目前处于新增状态,请保存主表')\n      } else {\n        this.addFormLoad()\n        this.offset = 0\n      }\n    },\n    // 保存当前数据\n    saveFromData () {\n      let formDate = 'auto'\n      let foreignfield = this.chileTableItem.data.foreignfield\n      let KeyWordType = this.chileTableItem.KeyWordType\n      let isAdded = checkChildTableIsAdded(foreignfield, this.currentItem)\n\n      if (!isAdded) {\n        formDate = 'edit'\n      } else {\n        formDate = 'add'\n        if (this.KeyValue === '0000') {\n          this.MixinAlertShowEvent('需先保存主表')\n          return false\n        }\n        this.currentItem =\n          setChildTableData(foreignfield, this.currentItem, this.mainformData, true)\n      }\n\n      let obj = {\n        KeyWord: this.KeyWord,\n        formAllConfig: this.formAllConfig,\n        KeyWordType: KeyWordType,\n        data: [this.currentItem],\n        formDate: formDate,\n        FormId: this.routerParams.FromId\n      }\n\n      this.tableShowField.forEach((item) => {\n        item.required = true\n      })\n\n      let verify = this.verifyRequireError(this.currentItem, this.tableShowField)\n      if (verify) {\n        this.AlertShowEvent('请补充必填项')\n        return false\n      }\n\n      let params = organizeParams(obj)\n      this.MinXinHttpFetch(FormSave(params), (response) => {\n        if (response.success) {\n          this.mx_toastText = '保存成功'\n          this.mx_toastShow = true\n          this.$emit('saveChildFrom')\n          this.closeEditBlock()\n        } else {\n          this.currentItem =\n          setChildTableData(foreignfield, this.currentItem, this.mainformData, false)\n        }\n      })\n    },\n    // 删除当前选中的数据\n    deleteSelectedItems () {\n      let formDate = 'delete'\n      let obj = {\n        KeyWord: this.KeyWord,\n        formAllConfig: this.formAllConfig,\n        KeyWordType: 'BO',\n        data: this.selectItems,\n        formDate: formDate,\n        FormId: this.routerParams.FromId\n      }\n      let params = organizeParams(obj)\n      this.MinXinHttpFetch(FormSave(params), (response) => {\n        if (response.success) {\n          this.mx_toastText = '删除成功'\n          this.mx_toastShow = true\n          this.$emit('saveChildFrom')\n          this._backPre()\n        }\n      })\n    },\n    // 初始化一条子表记录\n    addFormLoad () {\n      let params = {\n        KeyWord: this.KeyWord,\n        KeyValue: '',\n        KeyWordType: 'BO',\n        swhere: '',\n        select: '',\n        formstate: 'add'\n      }\n      this.MinXinHttpFetch(FormLoad(params), (response) => {\n        let value = response.data.value\n\n        this.currentItem = JSON.parse(value)\n      })\n    },\n    // 查看一条数据\n    selectItemView (item) {\n      if (this.showCheckBox) {\n        return false\n      } else {\n        this.currentItem = formatFromDataToView(\n          this.comboboxdata,\n          item,\n          this.KeyWord\n        )\n        this.offset = 0\n        let subTable = this.chileTableItem.subTable\n        if (subTable === 'withAttach') {\n          this.$refs.subFileAttach.GetDocFilesLoad(this.KeyWord, this.currentItem.Id)\n        }\n\n        if (subTable === 'withCommonTable') {\n          this.selectId = item.Code\n        }\n      }\n    },\n    // 返回\n    _backPre () {\n      let formListUnits = this.$refs.formListUnit\n      if (formListUnits && formListUnits.length !== 0) {\n        formListUnits.forEach(item => {\n          item.backDefault()\n        })\n      }\n\n      this.showCheckBox = false\n      this.selectItems = []\n    },\n    // 确定删除\n    _delete () {\n      let { addType } = this.chileTableItem\n      let { formstate } = this.routerParams\n\n      if (addType === 'fromWizard') {\n        this.MixinAlertShowEvent('仅限查看,不能删除')\n      } else if (formstate === 'view') {\n        this.MixinAlertShowEvent('仅限查看,不能删除')\n      } else if (formstate === 'add') {\n        this.MixinAlertShowEvent('目前处于新增状态,请保存主表')\n      } else {\n        this.deleteSelectedItems()\n      }\n    },\n    // 删除\n    _preDelete () {\n      this.showCheckBox = true\n    },\n    // 选中一条数据的事件\n    _selectItem (item) {\n      this.selectItems.push(item)\n    },\n    // 取消选中事件\n    _unSelectItem (item) {\n      removeList(this.selectItems, item)\n    },\n    // 关闭面板\n    closeEditBlock () {\n      this.offset = 100\n    },\n    ...mapActions([\n      'AlertShowEvent',\n      'ToastShowEvent'\n    ])\n  },\n  watch: {\n    tableData: {\n      handler (newData, oldData) {\n        if (!newData.values) {\n          newData.values = []\n        }\n\n        let subTable = this.chileTableItem.subTable\n        if (subTable === 'withCommonTable') {\n          this.subTableData = Object.assign({}, newData)\n        }\n\n        this.tableLists = newData.values.concat()\n      },\n      immediate: true\n    }\n  },\n  components: {\n    SearchBox,\n    FormList,\n    FooterBar,\n    FormRow,\n    subFileAttach,\n    SubCommonTable\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/win-form/commonChildTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chile-table-unit\"},[_c('div',{staticClass:\"child-main-content\"},[_c('form',{staticClass:\"child-main-table\"},[_c('ul',{staticClass:\"child-table-lists\"},[(_vm.tableType === 'table')?_c('li',{staticClass:\"table-title\"},[_c('div',{staticClass:\"title-wrap\"},[(_vm.option.title.show)?_c('div',{staticClass:\"title-item\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.option.title.text))])]):_vm._e(),_vm._v(\" \"),(_vm.option.left.show)?_c('div',{staticClass:\"title-item\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.option.left.text))])]):_vm._e(),_vm._v(\" \"),(_vm.option.center.show)?_c('div',{staticClass:\"title-item\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.option.center.text))])]):_vm._e(),_vm._v(\" \"),(_vm.option.right.show)?_c('div',{staticClass:\"title-item\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.option.right.text))])]):_vm._e()])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tableLists),function(item){return (_vm.tableLists.length)?_c('li',{key:item.Id,staticClass:\"table-list\",on:{\"click\":function($event){return _vm.selectItemView(item)}}},[_c('form-list',{ref:\"formListUnit\",refInFor:true,attrs:{\"item\":item,\"showCheckBox\":_vm.showCheckBox,\"tagShow\":_vm.tagShow,\"option\":_vm.option,\"tableType\":_vm.tableType,\"KeyWord\":_vm.KeyWord,\"comboboxdata\":_vm.comboboxdata},on:{\"selectItem\":_vm._selectItem,\"unSelectItem\":_vm._unSelectItem}})],1):_vm._e()})],2)]),_vm._v(\" \"),(_vm.isEdit)?_c('footer-bar',{on:{\"Add\":_vm._add,\"preDelete\":_vm._preDelete,\"Delete\":_vm._delete,\"backPre\":_vm._backPre}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"chile-table-lists-form\",style:({'transform': 'translate3d(' + this.offset + '%, 0, 0)'})},[_c('form',{staticClass:\"input-textarea-group\"},[(_vm.tableShowField.length > 0)?_c('div',_vm._l((_vm.tableShowField),function(fieldItem,fieldIndex){return _c('form-row',{key:fieldIndex,attrs:{\"label\":fieldItem.title,\"type\":fieldItem.format,\"readonly\":fieldItem.readonly,\"required\":fieldItem.required,\"disabled\":fieldItem.disabled,\"placeholder\":fieldItem.placeholder,\"field\":fieldItem.field,\"KeyWord\":_vm.KeyWord,\"fieldItem\":fieldItem,\"mainformData\":_vm.currentItem,\"comboboxdata\":_vm.comboboxdata,\"submit\":_vm.submit},on:{\"enterChange\":_vm.formRowChange}})}),1):_vm._e(),_vm._v(\" \"),(_vm.chileTableItem.subTable === 'withAttach')?_c('div',{staticClass:\"sub-file-attach-warp\"},[_c('h1',{staticClass:\"sub-file-attach-title font-color-active\"},[_vm._v(\"附件列表:\")]),_vm._v(\" \"),_c('sub-file-attach',{ref:\"subFileAttach\",attrs:{\"KeyWord\":_vm.KeyWord,\"KeyValue\":_vm.currentItem.Id}})],1):_vm._e(),_vm._v(\" \"),(_vm.chileTableItem.subTable === 'withCommonTable')?_c('div',{staticClass:\"sub-file-attach-warp\"},[_c('h1',{staticClass:\"sub-file-attach-title font-color-active\"},[_vm._v(\"请购明细:\")]),_vm._v(\" \"),_c('sub-common-table',{attrs:{\"tableTextNameOption\":_vm.subTableTextNameOption,\"tableShowField\":_vm.subTableShowField,\"tableData\":_vm.subTableData,\"tableType\":_vm.tableType,\"comboboxdata\":_vm.comboboxdata,\"selectId\":_vm.selectId}})],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"footer-actions\"},[(_vm.isEdit)?_c('div',{staticClass:\"action-item\",on:{\"click\":_vm.saveFromData}},[_vm._v(\"保存\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"action-item\",on:{\"click\":_vm.closeEditBlock}},[_vm._v(\"关闭\")])])]),_vm._v(\" \"),_c('loading',{model:{value:(_vm.mx_isLoading),callback:function ($$v) {_vm.mx_isLoading=$$v},expression:\"mx_isLoading\"}}),_vm._v(\" \"),_c('toast',{attrs:{\"type\":\"text\",\"time\":_vm.mx_deleyTime},model:{value:(_vm.mx_toastShow),callback:function ($$v) {_vm.mx_toastShow=$$v},expression:\"mx_toastShow\"}},[_vm._v(_vm._s(_vm.mx_toastText))]),_vm._v(\" \"),_c('alert',{attrs:{\"title\":_vm.mx_alertTitle,\"content\":_vm.mx_message},on:{\"on-hide\":_vm.MixinAlertHideEvent},model:{value:(_vm.mx_alertShow),callback:function ($$v) {_vm.mx_alertShow=$$v},expression:\"mx_alertShow\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51e20e78\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/win-form/commonChildTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51e20e78\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./commonChildTable.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader?{\\\"plugins\\\":[[\\\"babel-plugin-transform-modules\\\",{\\\"cube-ui\\\":{\\\"transform\\\":\\\"cube-ui/src/modules/${member}\\\",\\\"kebabCase\\\":true}}]]}!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./commonChildTable.vue\"\nimport __vue_script__ from \"!!babel-loader?{\\\"plugins\\\":[[\\\"babel-plugin-transform-modules\\\",{\\\"cube-ui\\\":{\\\"transform\\\":\\\"cube-ui/src/modules/${member}\\\",\\\"kebabCase\\\":true}}]]}!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./commonChildTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51e20e78\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./commonChildTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51e20e78\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/win-form/commonChildTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}