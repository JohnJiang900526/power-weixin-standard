webpackJsonp([14],{"7Qwa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),a=n("woOf"),r=n.n(a),s=n("Dd8w"),u=n.n(s),c=n("NYxO"),l=n("ALGc"),f=n("rHil"),h={data:function(){return{MindInfo:"",formState:"",Current:{},HistoryMind:[]}},mounted:function(){this.getStopFlowData()},methods:u()({submitData:function(){var t=this,e=this.validSubmitData();if(!e.isPass)return this.AlertShowEvent(e.msg),!1;var n=r()({},{Current:this.Current,FlowOperate:"Stop",MindInfo:this.MindInfo,VoteText:"",VoteValue:""});this.FlowActionData(i()(n)).then(function(e){t.ToastShowEvent("完成提交"),t.GetInformCount().then(function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){"view"===t.formState?t.$router.push("/workinfos"):t.goBack()},1e3)}).catch(function(e){t.AlertShowEvent(e.message)})}).catch(function(e){t.AlertShowEvent(e.message)})},validSubmitData:function(){var t={msg:"",isPass:!0};return""===this.MindInfo?(t.msg="意见不能为空",t.isPass=!1,t):t},getStopFlowData:function(){var t=this;this.getQuery();var e=r()({},{SubOperate:"GetCurrentSeque",FlowOperate:"SupplyInstance",SequeID:this.query.SequeID,Current:this.query});this.FlowActionData(i()(e)).then(function(e){var n=e.data.value;t.Current=r()({},n.Current),t.HistoryMind=n.HistoryMind.concat()}).catch(function(e){t.AlertShowEvent(e.message)})},getQuery:function(){var t=this.$router.history.current.query;t&&(this.query=r()({},t),this.formState=this.query.FormState)},goBack:function(){this.$router.back()}},Object(c.b)(["GetInformCount","FlowActionData","AlertShowEvent","ToastShowEvent"])),components:{XTextarea:l.a,Group:f.a}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"flow-stop-content"},[n("div",{staticClass:"flow-stop-main"},[n("h1",{staticClass:"title font-color-active"},[t._v("提交意见:")]),t._v(" "),n("group",{staticClass:"textarea-content"},[n("x-textarea",{attrs:{name:"description",max:300,placeholder:"输入提交意见"},model:{value:t.MindInfo,callback:function(e){t.MindInfo="string"==typeof e?e.trim():e},expression:"MindInfo"}})],1)],1),t._v(" "),n("div",{staticClass:"flow-stop-footer"},[n("div",{staticClass:"item",on:{click:t.submitData}},[t._v("\n        提交\n      ")]),t._v(" "),n("div",{staticClass:"item",on:{click:t.goBack}},[t._v("\n        返回\n      ")])])])])},staticRenderFns:[]};var m=n("VU/8")(h,v,!1,function(t){n("XsSf")},null,null);e.default=m.exports},XsSf:function(t,e){}});
//# sourceMappingURL=14.26c9a5cbf4b0068efd75.js.map